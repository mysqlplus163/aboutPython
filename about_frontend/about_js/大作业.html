<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>大作业</title>
  <style>
    .hide {
      display: none;
    }

    /*遮罩层*/
    .shade {
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      bottom: 0;
      background-color: black;
      opacity: 0.8;
    }

    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      height: 400px;
      width: 600px;
      margin-top: -200px;
      margin-left: -300px;
      background-color: white;
    }
  </style>
</head>
<body>

<button id="add">新增</button>
<table border="1">
  <thead>
  <tr>
    <th>#</th>
    <th>姓名</th>
    <th>爱好</th>
    <th>操作</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>1</td>
    <td>Egon</td>
    <td>杠娘</td>
    <td>
      <button class="edit-btn">编辑</button>
      <button class="delete-btn">删除</button>
    </td>
  </tr>
  <tr>
    <td>2</td>
    <td>Alex</td>
    <td>吹牛逼</td>
    <td>
      <button class="edit-btn">编辑</button>
      <button class="delete-btn">删除</button>
    </td>
  </tr>
  <tr>
    <td>3</td>
    <td>苑局</td>
    <td>日天</td>
    <td>
      <button class="edit-btn">编辑</button>
      <button class="delete-btn">删除</button>
    </td>
  </tr>
  </tbody>
</table>

<div id="myShade" class="shade hide"></div>
<div id="myModal" class="modal hide">
  <div>
    <label for="name"></label>
    <input type="text" id="modal-name">
    <label for="habit"></label>
    <input type="text" id="modal-habit">
    <button id="modal-submit">提交</button>
    <button id="modal-cancel">取消</button>
  </div>
</div>
<script>
  var tbodyEle = document.getElementsByTagName("tbody")[0];

  // 显示模态框函数
  function showModal(){
    var coverEle = document.getElementById("myShade");
    var modalEle = document.getElementById("myModal");
    
    coverEle.classList.remove("hide");
    modalEle.classList.remove("hide");
  }

  // 关闭模态框函数
  function closeModal() {
    var coverEle = document.getElementById("myShade");
    var modalEle = document.getElementById("myModal");

    coverEle.classList.add("hide");
    modalEle.classList.add("hide");
  }

  // 新增按钮绑定事件
  var newButton = document.getElementById("add");
  newButton.onclick = function () {
    showModal();
  };

  // 模态框的提交按钮
  var modalSubmit = document.getElementById("modal-submit");
  modalSubmit.onclick=function () {
    var trLength = document.getElementsByTagName("tr").length;
    var modalName = document.getElementById("modal-name").value;
    var modalHabit = document.getElementById("modal-habit").value;
    var newTr = document.createElement("tr");
    newTr.innerHTML="<td>" + trLength + "</td>" + "<td>" + modalName + "</td>" + "<td>" + modalHabit + "</td>" + "<td><button class=\"edit-btn\">编辑</button> <button class=\"delete-btn\">删除</button></td>";
    tbodyEle.appendChild(newTr);
    closeModal();
  };

  // 模态框的取消按钮绑定事件
  var cancelEle = document.getElementById("modal-cancel");
  cancelEle.onclick = function () {
    closeModal();
  };

  // 删除按钮绑定事件
  tbodyEle.addEventListener("click", function (evt) {
    var target = evt.target;
    if (target.classList.contains("delete-btn")) {
      this.removeChild(target.parentElement.parentElement);
    }
  });

</script>
</body>
</html>